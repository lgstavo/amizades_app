import{_ as c,r as i,c as l,a as o,w,b,d as u,v as d,t as k,e as p,f as h,g as L,u as V,R as _,h as x,o as m,i as g}from"./index-DToKaazj.js";const y={class:"login-container"},N={class:"form-group"},S={class:"form-group"},T={key:0,class:"error-message"},U={class:"register-link"},B={__name:"LoginView",setup(D){const a=i(""),r=i(""),n=i(""),v=x(),f=async()=>{try{const t=await g.post("/api/auth/login",{username:a.value,password:r.value}),e=t.data.username,s=t.data.token;s&&e&&(localStorage.setItem("authToken",s),localStorage.setItem("username",e),console.log("1. LOGIN: Token salvo no localStorage:",s),g.defaults.headers.common.Authorization=`Bearer ${s}`,await v.push("/dashboard"))}catch(t){console.error("Falha no Login: ",t),n.value="Usuário ou senha inválidos. Tente novamente."}};return(t,e)=>(m(),l("div",null,[e[8]||(e[8]=o("div",null,[o("h1",null,"Página de Login")],-1)),o("div",y,[o("form",{class:"login-form",onSubmit:w(f,["prevent"])},[e[6]||(e[6]=o("h2",null,"Login",-1)),o("div",N,[e[2]||(e[2]=o("label",{for:"username"},"Usuário",-1)),u(o("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),required:"",placeholder:"Digite seu nome de usuário"},null,512),[[d,a.value]])]),o("div",S,[e[3]||(e[3]=o("label",{for:"password"},"Senha",-1)),u(o("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s),required:"",placeholder:"Digite sua senha"},null,512),[[d,r.value]])]),n.value?(m(),l("p",T,k(n.value),1)):b("",!0),e[7]||(e[7]=o("button",{type:"submit"},"Entrar",-1)),o("div",U,[o("p",null,[e[5]||(e[5]=p("Não tem uma conta? ")),h(V(_),{to:"/register"},{default:L(()=>e[4]||(e[4]=[p("Registre-se")])),_:1,__:[4]})])])],32)])]))}},R=c(B,[["__scopeId","data-v-be0357ba"]]);export{R as default};
